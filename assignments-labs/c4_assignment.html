<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-09-18">

<title>Class 4 Assignment: Working with US Census ACS Data across time and geographic scales.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="c4_assignment_files/libs/clipboard/clipboard.min.js"></script>
<script src="c4_assignment_files/libs/quarto-html/quarto.js"></script>
<script src="c4_assignment_files/libs/quarto-html/popper.min.js"></script>
<script src="c4_assignment_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="c4_assignment_files/libs/quarto-html/anchor.min.js"></script>
<link href="c4_assignment_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="c4_assignment_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="c4_assignment_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="c4_assignment_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="c4_assignment_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="c4_assignment_files/styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#week-4-class-4-materials" id="toc-week-4-class-4-materials" class="nav-link" data-scroll-target="#week-4-class-4-materials">Week 4 Class 4 Materials:</a></li>
  <li><a href="#week-4-class-4-reading" id="toc-week-4-class-4-reading" class="nav-link" data-scroll-target="#week-4-class-4-reading">Week 4 Class 4 Reading:</a></li>
  <li><a href="#class-4-assignment" id="toc-class-4-assignment" class="nav-link" data-scroll-target="#class-4-assignment">Class 4 Assignment:</a></li>
  <li><a href="#class-4-assignment---option-1-the-poverty-rate-variable" id="toc-class-4-assignment---option-1-the-poverty-rate-variable" class="nav-link" data-scroll-target="#class-4-assignment---option-1-the-poverty-rate-variable">Class 4 Assignment - Option 1: The Poverty Rate Variable</a></li>
  <li><a href="#class-4-assignment---option-2-the-rent-burden-variable" id="toc-class-4-assignment---option-2-the-rent-burden-variable" class="nav-link" data-scroll-target="#class-4-assignment---option-2-the-rent-burden-variable">Class 4 Assignment - Option 2: The Rent Burden Variable</a></li>
  <li><a href="#class-4-assignment---develop-.rmd-submission" id="toc-class-4-assignment---develop-.rmd-submission" class="nav-link" data-scroll-target="#class-4-assignment---develop-.rmd-submission">Class 4 Assignment - Develop <code>.Rmd</code> Submission</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class 4 Assignment: Working with US Census ACS Data across time and geographic scales.</h1>
<p class="subtitle lead">Fall 2025 | Instructor: Stephen Metts | <a href="https://courses.newschool.edu/courses/PGUD5160/">PGUD 5160 - CRN 2247</a></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 18, 2025</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>In this fourth week’s assignment, we will utilize some of the scripting framework of <a href="https://tns-course-repositories.github.io/Methods_1-PGUD5160-DUE-Program-fall25/assignments-labs/c4_lab">Class 4 lab</a> to develop an R Markdown report that features two analysis workflows. The first is a time series analysis that begins in 2015 and ends in 2023. The second is a geographic comparative analysis using several geographic scales to determine how a selection of local NYC geographies relates to smaller scale (larger) geographies upwards to the nation itself.</p>
<p>Follow the sequence of steps below to first orient to this week’s content: lecture, materials and weekly reading(s). Once complete, move along to creating your R Markdown deliverable, making sure to upload the assignment deliverable, due Thursday, September 25th, 2025 at 11:59pm.</p>
</section>
<section id="week-4-class-4-materials" class="level2">
<h2 class="anchored" data-anchor-id="week-4-class-4-materials">Week 4 Class 4 Materials:</h2>
<ul>
<li><a href="https://tns-course-repositories.github.io/Methods_1-PGUD5160-DUE-Program-fall25/agendas/c4_agenda">Class 4 Agenda</a></li>
<li><a href="https://tns-course-repositories.github.io/Methods_1-PGUD5160-DUE-Program-fall25/assignments-labs/c4_lab">Class 4 lab</a></li>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/c4-assignment4-script-1.r">Class 4 Assignment Script Option #1 - Poverty Rate</a></li>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/c4-assignment4-script-2.r">Class 4 Assignment Script Option #2 - Rent Burden</a></li>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/assignment_4.Rmd">Class 4 Assignment .Rmd ‘starter file’</a></li>
<li><a href="https://tns-course-repositories.github.io/Methods_1-PGUD5160-DUE-Program-fall25/lecture-slides/lecture.4/index.html">Class 4 Lecture Slides</a></li>
</ul>
</section>
<section id="week-4-class-4-reading" class="level2">
<h2 class="anchored" data-anchor-id="week-4-class-4-reading">Week 4 Class 4 Reading:</h2>
<p>The following reading is a good resource to understanding all the specifics of the ACS across the dimensions discussed in the lecture - spatial, temporal and demographic details of the survey. This document is located as follows; the 10 question quiz next week will be limited to the following sections:</p>
<ol type="1">
<li>Understanding the ACS: The Basics ……………………………… 1</li>
<li>Geographic Areas Covered in the ACS ……………………………. 8</li>
<li>Understanding and Using ACS Single-Year and Multiyear Estimates ……. 13</li>
</ol>
<ul>
<li><a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_general_handbook_2020.pdf">UNDERSTANDING AND USING AMERICAN COMMUNITY SURVEY DATA: WHAT ALL DATA USERS NEED TO KNOW</a></li>
</ul>
<p>At 7am Friday, September 26th, the fourth weekly quiz will open in Canvas. Utilize the posted <a href="https://tns-course-repositories.github.io/Methods_1-PGUD5160-DUE-Program-fall25/agendas/c4_agenda">Class 4 Agenda</a> to gain the quiz access code which will be posted towards the beginning of the agenda. Expect 10 questions in total that cover the reading above.</p>
</section>
<section id="class-4-assignment" class="level2">
<h2 class="anchored" data-anchor-id="class-4-assignment">Class 4 Assignment:</h2>
<section id="step-1" class="level4">
<h4 class="anchored" data-anchor-id="step-1">Step 1:</h4>
<p>Similar to how we started our <code>lab_4</code> project directory (this is a repeat of the week 2 and week 3 setups), we will first simply <code>copy/paste</code> the <code>lab_4</code> directory at the desktop and name the new copied directory <code>assignment_4</code>. Remove all the data and results from <code>assignment_4</code> that came from the copy of <code>lab_4</code>; we will start fresh in this assignment with one of the two script options to pull the necessary census data and transform it to the data frame that will will need for our data analysis and visualization.</p>
<p>Create a new R project; utilize an <em>Existing Directory</em> and point it to the just copied <code>assignment_4</code> folder:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_assignment_files/img/existing-directory-a.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Choose Existing Directory</em></figcaption><p></p>
</figure>
</div>
<p>Run the standard <code>getwd()</code> before beginning <code>assignment_4</code>, ensuring you are within the newly created <code>assignment_4</code> project directory.</p>
<p>Like the week 2 and week 3 assignments, we will again be adapting and delivering a R Markdown File as the <code>assignment_4</code> deliverable. For quick reference, here is the R Markdown Cheat Sheet options for customizing syntax in your deliverable:</p>
<ul>
<li><p>R Markdown Cheat Sheet: <em>Help &gt; Posit Cheatsheets &gt; R Markdown Cheat Sheet</em></p></li>
<li><p><a href="https://rstudio.github.io/cheatsheets/html/rmarkdown.html">R Markdown Cheat Sheet Online</a></p></li>
</ul>
</section>
<section id="step-2" class="level4">
<h4 class="anchored" data-anchor-id="step-2">Step 2:</h4>
<p>To start working on <code>assignment_4</code>, you will need to decide if you want to map one of two variable themes. The first one we have covered in some detail in the <code>lab_4</code> - the poverty rate, defined by ACS as follows:</p>
<blockquote class="blockquote">
<p>S1701_C03_001: Percent below poverty level (population for whom poverty status is determined)</p>
</blockquote>
<p>The second variable theme is Rent Burden. This variable is typically understood based on two thresholds. The first is ‘burdened’ and the second is ‘severly burdened’. This can include both renters and household owners, but in the assignment script we subset to just the universe of renters and exclude household owners:</p>
<blockquote class="blockquote">
<p>B25070: Gross rent as % of household income (renter households)</p>
</blockquote>
<p>If you decide to plot and compare <code>Poverty Level</code>, utilize the following script:</p>
<ul>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/c4-assignment4-script-1.r">Class 4 Assignment script - Option 1 - Poverty Rate</a></li>
</ul>
<p>If you decide to plot and compare <code>Rent Burden</code>, utilize the following script instead:</p>
<ul>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/c4-assignment4-script-2.r">Class 4 Assignment script - Option 2 - Rent Burden</a></li>
</ul>
<p>Download your preferred version of the scripts, place it into your <code>/scripts</code> subdirectory, and open it into your r environment, but keep separate of your <code>.Rmd</code> submission. First produce and save your data frames from the script, then later load those data frames from within your <code>.Rmd</code> submission.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that <code>.r</code> scripts run in the Console environment are different than <code>.Rmd</code> code chunks which require both the data and libraries to be loaded explicitly in the <code>.Rmd</code> document. This is always a bit tedious and confusing, but you will get the hang of it with practice.</p>
</div>
</div>
</section>
</section>
<section id="class-4-assignment---option-1-the-poverty-rate-variable" class="level2">
<h2 class="anchored" data-anchor-id="class-4-assignment---option-1-the-poverty-rate-variable">Class 4 Assignment - Option 1: The Poverty Rate Variable</h2>
<section id="step-1-1" class="level4">
<h4 class="anchored" data-anchor-id="step-1-1">Step 1:</h4>
<p>If you would like to work with the Rent Burden Variable, skip the following steps and move to the <strong>Option 2</strong> section below.</p>
<p>To start with the Poverty Rate Variable, first make sure your libraries are installed and loaded:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href="#cb1-1"></a>library(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a>library(tidycensus)</span>
<span id="cb1-3"><a href="#cb1-3"></a>library(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, you will need to replace the current PUMAs in NYC with the PUMAs of your choice that are within the 5 boroughs that make up NYC. Make sure you replace the PUMA codes and the labels correctly, making sure the syntax of the code snippet remains the same.</p>
<p>The lookup PDF for the various PUMA community districts is available in this PDF to following. Make sure your PUMA codes are entered in via the 5 digit format, removing reference to NY State’s GEOID which is <code>36</code>:</p>
<ul>
<li><a href="https://www2.census.gov/geo/maps/DC2020/PUMA/st36_ny/Catalog_PUMAmaps_st36.pdf">PUMA Lookup PDF</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href="#cb2-1"></a></span>
<span id="cb2-2"><a href="#cb2-2"></a># Three PUMAs to compare (5-digit codes within NY)</span>
<span id="cb2-3"><a href="#cb2-3"></a>puma_codes &lt;- c("04103", "04401", "04414")</span>
<span id="cb2-4"><a href="#cb2-4"></a>puma_labels &lt;- c(</span>
<span id="cb2-5"><a href="#cb2-5"></a>  "PUMA 3604103 (Manhattan)",</span>
<span id="cb2-6"><a href="#cb2-6"></a>  "PUMA 3604401 (Queens CD 1—Astoria &amp; Queensbridge)",</span>
<span id="cb2-7"><a href="#cb2-7"></a>  "PUMA 3604414 (Queens CD 14—The Rockaways)"</span>
<span id="cb2-8"><a href="#cb2-8"></a>)</span>
<span id="cb2-9"><a href="#cb2-9"></a>names(puma_labels) &lt;- puma_codes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, revise the order of your PUMAs as needed, replacing the current with your own 3 chosen PUMAs:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a href="#cb3-1"></a># Desired row/plot order</span>
<span id="cb3-2"><a href="#cb3-2"></a>geo_order &lt;- c(</span>
<span id="cb3-3"><a href="#cb3-3"></a>  "PUMA 3604103 (Manhattan)",</span>
<span id="cb3-4"><a href="#cb3-4"></a>  "PUMA 3604401 (Queens CD 1—Astoria &amp; Queensbridge)",</span>
<span id="cb3-5"><a href="#cb3-5"></a>  "PUMA 3604414 (Queens CD 14—The Rockaways)",</span>
<span id="cb3-6"><a href="#cb3-6"></a>  "New York City (5 Boroughs)",</span>
<span id="cb3-7"><a href="#cb3-7"></a>  "New York State",</span>
<span id="cb3-8"><a href="#cb3-8"></a>  "United States"</span>
<span id="cb3-9"><a href="#cb3-9"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, make your <code>get_acs()</code> pull via <code>tidycensus</code>.</p>
<p>Following your <code>get_asc()</code> pull for your PUMAs, the script then cycles through the comparator geographies so that your 3 PUMAs which are local NYC geographies can be compared to smaller scale (larger) geographies all the way up to the national aggregation.</p>
<p>The first plot is then a comparison of the three PUMAs you have chosen with NYC, NY State and the nation located at the bottom of the plot - a useful comparison. Notice that the MOE bars are likely larger in your local geographies, and then they diminish as more aggregation takes place up the geographic census heirarchy:</p>
<blockquote class="blockquote">
<p>Small sample size, large MOE: Smaller geographic areas like census tracts, or more specific demographic groups within an area, have a smaller number of people in the survey sample. A small sample is more vulnerable to random variations and less representative of the total population, resulting in a higher margin of error.</p>
</blockquote>
<blockquote class="blockquote">
<p>Large sample size, small MOE: Larger geographic areas like states or counties are aggregates of many smaller areas and are therefore based on a much larger sample. This larger sample provides a more stable, precise estimate, which results in a smaller margin of error.</p>
</blockquote>
</section>
<section id="step-2-1" class="level4">
<h4 class="anchored" data-anchor-id="step-2-1">Step 2:</h4>
<p>Next, move along to producing the comparison chart. Here the <code>compare_tbl</code> that was the result of the previous steps of the script is named as a new object <code>poverty_table</code>. Using the <code>gt</code> library, the script transforms the <code>compare_tbl</code> into a chart format that stacks your chosen PUMAs atop the comparator geographies and outputs the chart as <code>poverty_table</code>.</p>
<section id="step-3" class="level5">
<h5 class="anchored" data-anchor-id="step-3">Step 3:</h5>
<p>Finally, wrap up the Rent Burden analysis by saving the <code>compare_tbl</code> into your <code>/results</code> subdirectory. You will then call the <code>compare_tbl</code> from within your <code>.Rmd</code> document that you design for your submission. Remember that saving for, and loading within <code>.Rmd</code>, are done in the <code>RData</code> format as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb4-1"><a href="#cb4-1"></a>save(compare_tbl, file = "~/Desktop/assignment_4/results/compare_tbl.RData")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb5-1"><a href="#cb5-1"></a>load("~/Desktop/assignment_4/results/compare_tbl.RData")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="class-4-assignment---option-2-the-rent-burden-variable" class="level2">
<h2 class="anchored" data-anchor-id="class-4-assignment---option-2-the-rent-burden-variable">Class 4 Assignment - Option 2: The Rent Burden Variable</h2>
<section id="step-1-2" class="level4">
<h4 class="anchored" data-anchor-id="step-1-2">Step 1:</h4>
<p>To start with the Rent Burden Variable, first make sure your libraries are installed and loaded:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a href="#cb6-1"></a>library(tidyverse)</span>
<span id="cb6-2"><a href="#cb6-2"></a>library(tidycensus)</span>
<span id="cb6-3"><a href="#cb6-3"></a>library(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, you will need to replace the current PUMAs in NYC with the PUMAs of your choice that are within the 5 boroughs that make up NYC. Make sure you replace the PUMA codes and the labels correctly, making sure the syntax of the code snippet remains the same.</p>
<p>The lookup PDF for the various PUMA community districts is available in this PDF to following. Make sure your PUMA codes are entered in via the 5 digit format, removing reference to NY State’s GEOID which is <code>36</code>:</p>
<ul>
<li><a href="https://www2.census.gov/geo/maps/DC2020/PUMA/st36_ny/Catalog_PUMAmaps_st36.pdf">PUMA Lookup PDF</a></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb7-1"><a href="#cb7-1"></a></span>
<span id="cb7-2"><a href="#cb7-2"></a># Three PUMAs to compare (5-digit codes within NY)</span>
<span id="cb7-3"><a href="#cb7-3"></a>puma_codes &lt;- c("04103", "04401", "04414")</span>
<span id="cb7-4"><a href="#cb7-4"></a>puma_labels &lt;- c(</span>
<span id="cb7-5"><a href="#cb7-5"></a>  "PUMA 3604103 (Manhattan)",</span>
<span id="cb7-6"><a href="#cb7-6"></a>  "PUMA 3604401 (Queens CD 1—Astoria &amp; Queensbridge)",</span>
<span id="cb7-7"><a href="#cb7-7"></a>  "PUMA 3604414 (Queens CD 14—The Rockaways)"</span>
<span id="cb7-8"><a href="#cb7-8"></a>)</span>
<span id="cb7-9"><a href="#cb7-9"></a>names(puma_labels) &lt;- puma_codes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, revise the order of your PUMAs as needed, replacing the current with your own 3 chosen PUMAs:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb8-1"><a href="#cb8-1"></a># Desired row/plot order</span>
<span id="cb8-2"><a href="#cb8-2"></a>geo_order &lt;- c(</span>
<span id="cb8-3"><a href="#cb8-3"></a>  "PUMA 3604103 (Manhattan)",</span>
<span id="cb8-4"><a href="#cb8-4"></a>  "PUMA 3604401 (Queens CD 1—Astoria &amp; Queensbridge)",</span>
<span id="cb8-5"><a href="#cb8-5"></a>  "PUMA 3604414 (Queens CD 14—The Rockaways)",</span>
<span id="cb8-6"><a href="#cb8-6"></a>  "New York City (5 Boroughs)",</span>
<span id="cb8-7"><a href="#cb8-7"></a>  "New York State",</span>
<span id="cb8-8"><a href="#cb8-8"></a>  "United States"</span>
<span id="cb8-9"><a href="#cb8-9"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Before moving to your <code>tidycensus</code> pulls, you will notice in the script that at line #15, <code>threshold &lt;- 30</code> is set. This will result in your analysis resulting in the Rent Burden calculation of &gt;=30%. If you set this threshold to <code>threshold &lt;- 50</code>, this will result in a Rent Burden threshold of ‘severe’. In other words, these are renters that are spending 50% or more just on rent alone. You also would need to change line #53 also to the higher 50% value, replacing the default 30% in the script.</p>
<p>Next, make your <code>get_acs()</code> pull via <code>tidycensus</code>.</p>
<p>Following your <code>get_asc()</code> pull for your PUMAs, the script then cycles through the comparator geographies so that your 3 PUMAs which are local NYC geographies can be compared to smaller scale (larger) geographies all the way up to the national aggregation.</p>
<p>The first plot is then a comparison of the three PUMAs you have chosen with NYC, NY State and the nation located at the bottom of the plot - a useful comparison. Notice that the MOE bars are likely larger in your local geographies, and then they diminish as more aggregation takes place up the geographic census hierarchy:</p>
<blockquote class="blockquote">
<p>Small sample size, large MOE: Smaller geographic areas like census tracts, or more specific demographic groups within an area, have a smaller number of people in the survey sample. A small sample is more vulnerable to random variations and less representative of the total population, resulting in a higher margin of error.</p>
</blockquote>
<blockquote class="blockquote">
<p>Large sample size, small MOE: Larger geographic areas like states or counties are aggregates of many smaller areas and are therefore based on a much larger sample. This larger sample provides a more stable, precise estimate, which results in a smaller margin of error.</p>
</blockquote>
</section>
<section id="step-2-2" class="level4">
<h4 class="anchored" data-anchor-id="step-2-2">Step 2:</h4>
<p>Next, move along to producing the comparison chart. Here the <code>compare_tbl</code> that was the result of the previous steps of the script is named as a new object <code>rentburden_table</code>. Using the <code>gt</code> library, the script transforms the <code>compare_tbl</code> into a chart format that stacks your chosen PUMAs atop the comparator geographies and outputs the chart as <code>rentburden_table</code>.</p>
<section id="step-3-1" class="level5">
<h5 class="anchored" data-anchor-id="step-3-1">Step 3:</h5>
<p>Finally, wrap up the Poverty Rate analysis by saving the <code>compare_tbl</code> into your <code>/results</code> subdirectory. You will then call the <code>compare_tbl</code> from within your <code>.Rmd</code> document that you design for your submission. Remember that saving for, and loading within <code>Rmd</code>, are done in the <code>RData</code> format as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb9-1"><a href="#cb9-1"></a>save(compare_tbl, file = "~/Desktop/assignment_4/results/compare_tbl.RData")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb10-1"><a href="#cb10-1"></a>load("~/Desktop/assignment_4/results/compare_tbl.RData")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="class-4-assignment---develop-.rmd-submission" class="level2">
<h2 class="anchored" data-anchor-id="class-4-assignment---develop-.rmd-submission">Class 4 Assignment - Develop <code>.Rmd</code> Submission</h2>
<p>From within your <code>assignment_4</code> project, navigate to the docs folder. This is the location in which you will first download the example R Markdown file (<code>.Rmd</code>), and open it anew in your project. Alternatively, you can create your own R Markdown file, but the download version has some formatting set up that can be a helpful start point (as was the case for <code>assignment_2</code> and <code>assignment_3</code>).</p>
<p>To open an existing R Markdown file:</p>
<p><em>File &gt; Open File &gt; assignment_3 &gt; docs &gt; assignment_3.Rmd</em></p>
<p>To create your own R Markdown file:</p>
<p><em>File &gt; New File &gt; R Markdown</em></p>
<ul>
<li><a href="https://github.com/tns-course-repositories/Methods_1-PGUD5160-DUE-Program-fall25/blob/main/scripts/assignment_4.Rmd"><code>assignment_4.Rmd</code> ‘starter file’</a></li>
</ul>
<p>Next, loading, working with and saving data in the Console is <em>NOT</em> the same as loading, displaying and plotting data in an <code>.Rmd</code> file. Keep in mind that the Console is the iterative, working environment, whereas <code>.Rmd</code> is designed for publishing and sharing your analysis results.</p>
<p>So, the first step <em>following</em> the completion of accessing and plotting either the Poverty Rate or Rent Burden Rate for your chosen PUMAs and comparator geographies is to first load that data that has been cleaned in the <code>assignment_4</code> steps explicitly within the <code>.Rmd</code> environment.</p>
<p>We load the data as follows from <em>within</em> the <code>.Rmd</code> document. Utilize the green <em>run</em> button to the far right of the code block to execute the code:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource {{r}} number-lines code-with-copy"><code class="sourceCode"><span id="cb11-1"><a href="#cb11-1"></a>load("~/Desktop/assignment_4/results/compare_tbl.RData")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, you need to copy from either option 1 or option 2 scripts those sections that input <code>compare_tbl</code>, transform that table and plot first the comparison plot then the comparison table. There are three components for each option:</p>
<ul>
<li>load the <em>settings</em> for the comparison plot and chart
<ul>
<li>for option 1, paste here <code>lines #14 - #36</code> from the Poverty Rate script.</li>
<li>for option 2, paste here <code>lines #13 - #50</code> from the Rent Burden script.</li>
</ul></li>
<li>Load the code listing for the comparison plot
<ul>
<li>for option 1, paste here <code>lines #142 - #168</code> from the Poverty Rate script.</li>
<li>for option 2, paste here <code>lines #210 - #233</code> from the Rent Burden script.</li>
</ul></li>
<li>Load the code listing for the comparison chart
<ul>
<li>#for option 1, paste here <code>lines #170 - #205</code> from the Poverty Rate script.</li>
<li>#for option 2, paste here <code>lines #235 - #272</code> from the Rent Burden script.</li>
</ul></li>
</ul>
<p>A placeholder code chunk for each of these sections is located in the starter <code>.Rmd</code>.</p>
<p>Make sure to load in your required libraries at the top of the script, and if needed you can reset your API key, although its unlikely you would need to do this as we set the key to <code>install = TRUE</code> for ongoing usage in your R installation.</p>
<p>As you finalize your code and bring it into your <code>.Rmd</code> submission document, all components - the libraries, the data and the plotting code - need to exist in the <code>.Rmd</code> environment as it operates separate of your Console environment.</p>
<p>For your contextual writing and observations consider the following prompts:</p>
<ul>
<li>Are there similarities or differences in your variable rate at the PUMA level? In other words, are your chosen PUMAs similar or do they exhibit important differences?</li>
<li>What surprised you the most about the comparative nature of the variable rate across geographies?<br>
</li>
<li>Is there significant differences between the PUMA NYC geographies and their typical comparisons at NYC all boroughs, NY State and National levels?</li>
</ul>
<p>The assignment 4 submission is due to Canvas on Thursday, September 25th, 2025 at 11:59pm. The format is the <code>.html</code> document format generated from your <code>Rmd</code> document.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>gt</code> tables don’t render all that well without revisions to the <code>.Rmd</code> file when printing to <code>PDF</code>. So this week, we’ll output to <code>.html</code> alone and the <code>gt</code> comparison table should print well.</p>
</div>
</div>
<p>Note that when you knit your output, the <code>.Rmd</code> should not be removed; that is, keep it in your assignment folder in addition to the final <code>.html</code> submission.</p>
<p>The Assignment 4 R Markdown deliverable is due to Canvas on Thursday, September 25th, 2025 at 11:59pm.</p>
<section id="references" class="level4">
<h4 class="anchored" data-anchor-id="references">References:</h4>
<ul>
<li><a href="https://www.census.gov/programs-surveys/geography/guidance/geo-areas/pumas.html">PUMAs as census geography</a></li>
<li><a href="https://www.nyc.gov/content/planning/pages/resources/datasets/community-district-tabulation">NYC Planning Community District Tabulation Areas (CDTAs)</a></li>
<li><a href="https://walker-data.com/tidycensus/articles/margins-of-error.html">MOE in ACS Data - <code>tidycensus</code></a></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/^(?:http:|https:)\/\/www\.quarto\.org\/custom/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



<script src="c4_assignment_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>